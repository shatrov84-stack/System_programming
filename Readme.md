# üéØ –£–†–û–ö 1: –°–û–ó–î–ê–ù–ò–ï –û–ö–ù–ê WINDOWS

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ Windows —Å –ø–æ–º–æ—â—å—é WinAPI. –ü–æ–Ω—è—Ç—å —Ü–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Windows-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

## üìñ –ß–¢–û –ù–£–ñ–ù–û –ó–ù–ê–¢–¨

1. **WinMain** ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤–º–µ—Å—Ç–æ main()
2. **WNDCLASS** ‚Äî —à–∞–±–ª–æ–Ω –æ–∫–Ω–∞ (–∫–ª–∞—Å—Å)
3. **HWND** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–∫–Ω–∞
4. **–¶–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî GetMessage ‚Üí DispatchMessage
5. **WindowProc** ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –æ–∫–Ω–∞

## üíª –ö–û–î –ü–†–û–ì–†–ê–ú–ú–´

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `window.c` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥:

```c
#include <windows.h>

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –æ–∫–Ω–∞
LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Windows-–ø—Ä–æ–≥—Ä–∞–º–º—ã
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
                    PWSTR pCmdLine, int nCmdShow)
{
    // 1. –°–û–ó–î–ê–ï–ú –ö–õ–ê–°–° –û–ö–ù–ê
    const wchar_t CLASS_NAME[] = L"MyWindowClass";
    
    WNDCLASS wc = {0};
    wc.lpfnWndProc = WindowProc;      // –£–∫–∞–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏
    wc.hInstance = hInstance;         // –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã
    wc.lpszClassName = CLASS_NAME;    // –ò–º—è –∫–ª–∞—Å—Å–∞
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);      // –ö—É—Ä—Å–æ—Ä –º—ã—à–∏
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1); // –¶–≤–µ—Ç —Ñ–æ–Ω–∞
    
    RegisterClass(&wc);  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–ª–∞—Å—Å –≤ —Å–∏—Å—Ç–µ–º–µ
    
    // 2. –°–û–ó–î–ê–ï–ú –°–ê–ú–û –û–ö–ù–û
    HWND hwnd = CreateWindowEx(
        0,                      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
        CLASS_NAME,             // –ò–º—è –∫–ª–∞—Å—Å–∞
        L"–ú–æ—ë –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ",     // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞
        WS_OVERLAPPEDWINDOW,    // –°—Ç–∏–ª—å –æ–∫–Ω–∞
        
        // –†–∞–∑–º–µ—Ä –∏ –ø–æ–ª–æ–∂–µ–Ω–∏–µ:
        CW_USEDEFAULT, CW_USEDEFAULT, 500, 300,
        
        NULL,       // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –æ–∫–Ω–æ
        NULL,       // –ú–µ–Ω—é
        hInstance,  // –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã
        NULL        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    );
    
    if (hwnd == NULL) {
        return 0;  // –ï—Å–ª–∏ –æ–∫–Ω–æ –Ω–µ —Å–æ–∑–¥–∞–ª–æ—Å—å - –≤—ã—Ö–æ–¥–∏–º
    }
    
    // 3. –ü–û–ö–ê–ó–´–í–ê–ï–ú –û–ö–ù–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Æ
    ShowWindow(hwnd, nCmdShow);
    
    // 4. –ó–ê–ü–£–°–ö–ê–ï–ú –¶–ò–ö–õ –°–û–û–ë–©–ï–ù–ò–ô
    MSG msg = {0};
    while (GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);   // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        DispatchMessage(&msg);    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ WindowProc
    }
    
    return 0;
}

// 5. –§–£–ù–ö–¶–ò–Ø –û–ë–†–ê–ë–û–¢–ö–ò –°–û–ë–´–¢–ò–ô –û–ö–ù–ê
LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_PAINT:  // –°–æ–æ–±—â–µ–Ω–∏–µ "–Ω–∞–¥–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –æ–∫–Ω–æ"
    {
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &ps);  // –ù–∞—á–∏–Ω–∞–µ–º —Ä–∏—Å–æ–≤–∞–Ω–∏–µ
        
        // –í—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –≤ –æ–∫–Ω–æ
        TextOutW(hdc, 50, 50, L"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!", 13);
        TextOutW(hdc, 50, 80, L"–í—ã —Å–æ–∑–¥–∞–ª–∏ –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ Windows", 31);
        TextOutW(hdc, 50, 110, L"–ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ, —á—Ç–æ–±—ã –≤—ã–π—Ç–∏", 27);
        
        EndPaint(hwnd, &ps);  // –ó–∞–∫–∞–Ω—á–∏–≤–∞–µ–º —Ä–∏—Å–æ–≤–∞–Ω–∏–µ
        return 0;
    }
    
    case WM_DESTROY:  // –°–æ–æ–±—â–µ–Ω–∏–µ "–æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è"
        PostQuitMessage(0);  // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        return 0;
    }
    
    // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ
    return DefWindowProc(hwnd, uMsg, wParam, lParam);
}
```

## üîß –ö–ê–ö –°–ö–û–ú–ü–ò–õ–ò–†–û–í–ê–¢–¨

### –í Visual Studio (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±):
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–¥ –∫–∞–∫ `window.c`
2. –û—Ç–∫—Ä–æ–π—Ç–µ **Developer Command Prompt for VS**
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
cl window.c user32.lib gdi32.lib /link /subsystem:windows
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –°–æ–∑–¥–∞—Å—Ç—Å—è —Ñ–∞–π–ª `window.exe`
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ ‚Äî —É–≤–∏–¥–∏—Ç–µ –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ!

## üìù –ó–ê–î–ê–ù–ò–ï –ù–ê –ü–†–ê–ö–¢–ò–ö–£

**–î–æ–±–∞–≤—å—Ç–µ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É:**

1. **–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è** –≤ –æ–∫–Ω–µ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `GetLocalTime`)
```c
SYSTEMTIME st;
GetLocalTime(&st);
// –í—ã–≤–µ–¥–∏—Ç–µ st.wHour, st.wMinute, st.wSecond
```

2. **–û–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∏–∫–∞ –º—ã—à–∏** (—Å–æ–æ–±—â–µ–Ω–∏–µ `WM_LBUTTONDOWN`)
```c
case WM_LBUTTONDOWN: {
    int x = LOWORD(lParam);  // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X
    int y = HIWORD(lParam);  // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y
    // –í—ã–≤–µ–¥–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –æ–∫–Ω–æ
    break;
}
```

## ‚ùì –ß–ê–°–¢–´–ï –í–û–ü–†–û–°–´

**Q: –ü–æ—á–µ–º—É WinMain –≤–º–µ—Å—Ç–æ main?**  
A: Windows —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –æ–∫–æ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

**Q: –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ü–∏–∫–ª while(GetMessage)?**  
A: –≠—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –∂–¥—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Windows (–∫–ª–∏–∫–∏, –∫–ª–∞–≤–∏—à–∏ –∏ —Ç.–¥.)

**Q: –ó–∞—á–µ–º –Ω—É–∂–µ–Ω DefWindowProc?**  
A: –ß—Ç–æ–±—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å Windows.

## üöÄ –ß–¢–û –î–ê–õ–¨–®–ï?

–°–ª–µ–¥—É—é—â–∏–µ —É—Ä–æ–∫–∏:
–£—Ä–æ–∫ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∫–Ω–æ–ø–∫–∏, –º–µ–Ω—é)
–£—Ä–æ–∫ 3: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
–£—Ä–æ–∫ 4: –î–∏–∞–ª–æ–≥–æ–≤—ã–µ –æ–∫–Ω–∞ –∏ –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
–£—Ä–æ–∫ 5: –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
–£—Ä–æ–∫ 6: –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî —Å–∏—Å—Ç–µ–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞

**–ì–ª–∞–≤–Ω–æ–µ ‚Äî —É –≤–∞—Å —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ Windows!** ‚ú®

---
