# üéØ **–£–†–û–ö 2: –°–¢–†–û–ö–ò –ò –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –í WINAPI**

**–¶–µ–ª—å —É—Ä–æ–∫–∞:**  
–ù–∞—É—á–∏—Ç—å—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ Windows API –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏. –û—Å–≤–æ–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –º–µ–∂–¥—É –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –æ—à–∏–±–æ–∫ WinAPI.

---

## üìö **–¢–ï–û–†–ï–¢–ò–ß–ï–°–ö–ê–Ø –ß–ê–°–¢–¨ (–ø–æ –∫–Ω–∏–≥–µ –ò–æ—Å–∏—Ñ–æ–≤–∏—á–∞)**

### **–°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:**
- **–°—Ç—Ä–∞–Ω–∏—Ü—ã 18-28:** "Working with Strings" ‚Äî —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ WinAPI
- **–°—Ç—Ä–∞–Ω–∏—Ü—ã 31-34:** "Handling API Errors" ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–°—Ç—Ä–∞–Ω–∏—Ü—ã 34-35:** "Defining Custom Error Codes" ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫

### **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**

#### **1. –°—Ç—Ä–æ–∫–∏ –≤ WinAPI:**
- **Unicode vs ANSI:** Windows –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-16 (—à–∏—Ä–æ–∫–∏–µ —Å–∏–º–≤–æ–ª—ã `wchar_t`)
- **–ö–æ–¥–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** Windows-1251 –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞, CP_UTF8 –¥–ª—è Unicode
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** `strcpy_s`, `strcat_s`, `sprintf_s` –≤–º–µ—Å—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∞–Ω–∞–ª–æ–≥–æ–≤
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:** `MultiByteToWideChar`, `WideCharToMultiByte`

#### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- **`GetLastError()`:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—à–∏–±–∫–∏
- **`FormatMessage()`:** –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –æ—à–∏–±–∫–∏ –≤ —á–∏—Ç–∞–µ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **`SetLastError()`:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫
- **–ö–æ–¥—ã –æ—à–∏–±–æ–∫:** `ERROR_SUCCESS`, `ERROR_FILE_NOT_FOUND`, `ERROR_ACCESS_DENIED`

#### **3. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö Windows:**
- `DWORD` ‚Äî 32-–±–∏—Ç–Ω–æ–µ –±–µ–∑–∑–Ω–∞–∫–æ–≤–æ–µ —Ü–µ–ª–æ–µ
- `LPSTR`, `LPWSTR` ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ (ANSI –∏ Unicode)
- `BOOL` ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø (TRUE=1, FALSE=0)
- `HRESULT` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ (SUCCEEDED/FAILED)

---

## üìù **–ó–ê–î–ê–ù–ò–ï**

### **–ß–∞—Å—Ç—å 1: –¢–µ–æ—Ä–∏—è (–æ—Ç–≤–µ—Ç—å—Ç–µ –ø–∏—Å—å–º–µ–Ω–Ω–æ)**
1. –ü–æ—á–µ–º—É –≤ WinAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UTF-16 (Unicode), –∞ –Ω–µ –æ–¥–Ω–æ–±–∞–π—Ç–æ–≤—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏?
2. –ß–µ–º —Ñ—É–Ω–∫—Ü–∏—è `strcpy_s` –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –æ–±—ã—á–Ω–æ–≥–æ `strcpy`?
3. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ `GetLastError()` –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏?
4. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –ø–∞–º—è—Ç—å, –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–µ–π `FormatMessage`?
5. –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `SetLastError()` –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –µ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç?

### **–ß–∞—Å—Ç—å 2: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞**

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—à–∏–±–æ–∫ WinAPI

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–≥—Ä–∞–º–º–µ:**
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä—É—Å—Å–∫–æ–π –ª–æ–∫–∞–ª–∏ (Windows-1251)
2. –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Å—Ç—Ä–æ–∫ –º–µ–∂–¥—É –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏
3. –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ WinAPI
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
5. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üíª **–ü–û–õ–ù–´–ô –ò–°–•–û–î–ù–´–ô –ö–û–î –ü–†–û–ì–†–ê–ú–ú–´**

```c
#define _CRT_SECURE_NO_WARNINGS

#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã —Ñ—É–Ω–∫—Ü–∏–π
void PrintMenu();
void ConvertStrings();
void AnalyzeError();
void CheckFileExists();
void DemonstrateCustomError();
void SafeStringOperationsDemo();
void PrintError(DWORD errorCode, const char* functionName);

// –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
int main()
{
    // –ù–ê–°–¢–†–û–ô–ö–ê –†–£–°–°–ö–û–ô –õ–û–ö–ê–õ–ò
    SetConsoleCP(1251);           // –ö–æ–¥–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–≤–æ–¥–∞ Windows-1251
    SetConsoleOutputCP(1251);     // –ö–æ–¥–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–≤–æ–¥–∞ Windows-1251

    printf("=== –£—Ç–∏–ª–∏—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ –æ—à–∏–±–∫–∞–º–∏ WinAPI ===\n\n");

    int choice = 0;
    char input[10];

    while (1)
    {
        PrintMenu();
        printf("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (1-6): ");

        if (fgets(input, sizeof(input), stdin) != NULL)
        {
            choice = atoi(input);
        }

        switch (choice)
        {
        case 1:
            ConvertStrings();
            break;
        case 2:
            AnalyzeError();
            break;
        case 3:
            CheckFileExists();
            break;
        case 4:
            DemonstrateCustomError();
            break;
        case 5:
            SafeStringOperationsDemo();
            break;
        case 6:
            printf("–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã.\n");
            return 0;
        default:
            printf("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.\n");
            break;
        }

        if (choice != 6)
        {
            printf("\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...");
            int ch;
            while ((ch = getchar()) != '\n' && ch != EOF);
        }
    }

    return 0;
}

// –§—É–Ω–∫—Ü–∏—è 1: –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Å—Ç—Ä–æ–∫
void ConvertStrings()
{
    printf("\n=== –ö–û–ù–í–ï–†–¢–ï–† –°–¢–†–û–ö ===\n\n");

    printf("–í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: ");

    char input[256];
    if (fgets(input, sizeof(input), stdin) == NULL)
    {
        printf("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞.\n");
        return;
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
    size_t len = strlen(input);
    if (len > 0 && input[len - 1] == '\n')
    {
        input[len - 1] = '\0';
    }

    printf("–ò—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: %s\n", input);
    printf("–î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: %zu —Å–∏–º–≤–æ–ª–æ–≤\n", strlen(input));

    // ANSI (Windows-1251) -> Unicode (UTF-16)
    wchar_t unicodeBuffer[256];
    int unicodeLength = MultiByteToWideChar(1251, 0, input, -1, unicodeBuffer, 256);

    if (unicodeLength > 0)
    {
        printf("Unicode –≤–µ—Ä—Å–∏—è (%d —Å–∏–º–≤–æ–ª–æ–≤): ", unicodeLength - 1);

        // –í—ã–≤–æ–¥–∏–º –∫–æ–¥—ã Unicode (UTF-16) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
        for (int i = 0; i < unicodeLength - 1; i++)  // -1 —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –Ω—É–ª–µ–≤–æ–π —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä
        {
            printf("U+%04X ", (unsigned int)unicodeBuffer[i]);
        }
        printf("\n");
    }
    else
    {
        PrintError(GetLastError(), "MultiByteToWideChar");
    }

    // Unicode -> ANSI (–æ–±—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
    char ansiBuffer[256];
    int ansiLength = WideCharToMultiByte(1251, 0, unicodeBuffer, -1, ansiBuffer, 256, NULL, NULL);

    if (ansiLength > 0)
    {
        printf("ANSI –≤–µ—Ä—Å–∏—è –ø–æ—Å–ª–µ –æ–±—Ä–∞—Ç–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (%d –±–∞–π—Ç): %s\n", ansiLength - 1, ansiBuffer);
    }
}

// –§—É–Ω–∫—Ü–∏—è 2: –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –æ—à–∏–±–æ–∫
void AnalyzeError()
{
    printf("\n=== –ê–ù–ê–õ–ò–ó–ê–¢–û–† –û–®–ò–ë–û–ö WINAPI ===\n\n");

    printf("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –¥–ª—è ERROR_ACCESS_DENIED): ");

    char errorStr[20];
    if (fgets(errorStr, sizeof(errorStr), stdin) == NULL)
    {
        printf("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞.\n");
        return;
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
    size_t len = strlen(errorStr);
    if (len > 0 && errorStr[len - 1] == '\n')
    {
        errorStr[len - 1] = '\0';
    }

    DWORD errorCode = atoi(errorStr);

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
    LPSTR errorMsg = NULL;
    DWORD chars = FormatMessageA(
        FORMAT_MESSAGE_ALLOCATE_BUFFER |
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        errorCode,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPSTR)&errorMsg,
        0,
        NULL
    );

    if (chars > 0 && errorMsg != NULL)
    {
        printf("\n–ö–æ–¥ –æ—à–∏–±–∫–∏: %lu (0x%08lX)\n", errorCode, errorCode);
        printf("–°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: %s\n", errorMsg);

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
        switch (errorCode)
        {
        case ERROR_SUCCESS:
            printf("–û–ø–∏—Å–∞–Ω–∏–µ: –û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ\n");
            break;
        case ERROR_FILE_NOT_FOUND:
            printf("–û–ø–∏—Å–∞–Ω–∏–µ: –£–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω\n");
            printf("–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å, —Ñ–∞–π–ª —É–¥–∞–ª–µ–Ω\n");
            break;
        case ERROR_PATH_NOT_FOUND:
            printf("–û–ø–∏—Å–∞–Ω–∏–µ: –£–∫–∞–∑–∞–Ω–Ω—ã–π –ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω\n");
            printf("–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤\n");
            break;
        case ERROR_ACCESS_DENIED:
            printf("–û–ø–∏—Å–∞–Ω–∏–µ: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω\n");
            printf("–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤, —Ñ–∞–π–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω\n");
            break;
        case ERROR_INVALID_PARAMETER:
            printf("–û–ø–∏—Å–∞–Ω–∏–µ: –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä\n");
            printf("–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –Ω—É–ª–µ–≤–æ–π —É–∫–∞–∑–∞—Ç–µ–ª—å, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ\n");
            break;
        default:
            printf("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ WinAPI\n");
            break;
        }

        LocalFree(errorMsg);
    }
    else
    {
        printf("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–¥–∞ %lu\n", errorCode);
        printf("–í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–æ–¥ –æ—à–∏–±–∫–∏\n");
    }
}

// –§—É–Ω–∫—Ü–∏—è 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
void CheckFileExists()
{
    printf("\n=== –ü–†–û–í–ï–†–ö–ê –°–£–©–ï–°–¢–í–û–í–ê–ù–ò–Ø –§–ê–ô–õ–ê ===\n\n");

    printf("–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É: ");

    char filePath[MAX_PATH];
    if (fgets(filePath, sizeof(filePath), stdin) == NULL)
    {
        printf("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞.\n");
        return;
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
    size_t len = strlen(filePath);
    if (len > 0 && filePath[len - 1] == '\n')
    {
        filePath[len - 1] = '\0';
    }

    printf("–ü—Ä–æ–≤–µ—Ä—è—é —Ñ–∞–π–ª: %s\n", filePath);

    // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ Unicode (–¥–ª—è GetFileAttributesW)
    wchar_t wfilePath[MAX_PATH];
    MultiByteToWideChar(1251, 0, filePath, -1, wfilePath, MAX_PATH);

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
    DWORD attributes = GetFileAttributesW(wfilePath);

    if (attributes == INVALID_FILE_ATTRIBUTES)
    {
        DWORD error = GetLastError();
        printf("–§–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.\n");
        PrintError(error, "GetFileAttributes");
    }
    else
    {
        printf("‚úì –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\n");

        printf("–ê—Ç—Ä–∏–±—É—Ç—ã —Ñ–∞–π–ª–∞:\n");
        if (attributes & FILE_ATTRIBUTE_READONLY)
            printf("  - –¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è\n");
        if (attributes & FILE_ATTRIBUTE_HIDDEN)
            printf("  - –°–∫—Ä—ã—Ç—ã–π\n");
        if (attributes & FILE_ATTRIBUTE_SYSTEM)
            printf("  - –°–∏—Å—Ç–µ–º–Ω—ã–π\n");
        if (attributes & FILE_ATTRIBUTE_DIRECTORY)
            printf("  - –ö–∞—Ç–∞–ª–æ–≥\n");
        if (attributes & FILE_ATTRIBUTE_ARCHIVE)
            printf("  - –ê—Ä—Ö–∏–≤–Ω—ã–π\n");
        if (attributes & FILE_ATTRIBUTE_NORMAL)
            printf("  - –û–±—ã—á–Ω—ã–π —Ñ–∞–π–ª\n");
        if (attributes & FILE_ATTRIBUTE_COMPRESSED)
            printf("  - –°–∂–∞—Ç—ã–π\n");
        if (attributes & FILE_ATTRIBUTE_ENCRYPTED)
            printf("  - –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π\n");
    }
}

// –§—É–Ω–∫—Ü–∏—è 4: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –æ—à–∏–±–∫–∏
void DemonstrateCustomError()
{
    printf("\n=== –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ï –û–®–ò–ë–ö–ò ===\n\n");

    // –ü—Ä–∏–º–µ—Ä 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ –æ—à–∏–±–∫–∏
    printf("1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–¥–∞ –æ—à–∏–±–∫–∏:\n");

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π –∫–æ–¥ –æ—à–∏–±–∫–∏
    DWORD originalError = GetLastError();
    printf("   –¢–µ–∫—É—â–∏–π –∫–æ–¥ –æ—à–∏–±–∫–∏: %lu\n", originalError);

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–¥
    DWORD customError = 0x1000;
    SetLastError(customError);

    // –ü–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ
    DWORD retrievedError = GetLastError();
    printf("   –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ–¥: 0x%08lX\n", retrievedError);
    printf("   –ü—Ä–æ–≤–µ—Ä–∫–∞: %s\n", (retrievedError == customError) ? "OK" : "–û—à–∏–±–∫–∞");

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
    SetLastError(originalError);

    // –ü—Ä–∏–º–µ—Ä 2: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫
    printf("\n2. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ Windows:\n");
    printf("   ERROR_SUCCESS = %d (—É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)\n", ERROR_SUCCESS);
    printf("   ERROR_FILE_NOT_FOUND = %d (—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω)\n", ERROR_FILE_NOT_FOUND);
    printf("   ERROR_PATH_NOT_FOUND = %d (–ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω)\n", ERROR_PATH_NOT_FOUND);
    printf("   ERROR_ACCESS_DENIED = %d (–¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω)\n", ERROR_ACCESS_DENIED);
    printf("   ERROR_INVALID_PARAMETER = %d (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)\n", ERROR_INVALID_PARAMETER);
    printf("   ERROR_OUTOFMEMORY = %d (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏)\n", ERROR_OUTOFMEMORY);

    // –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
    printf("\n3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏:\n");

    // –°–∏–º—É–ª–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
    SetLastError(ERROR_SUCCESS);
    if (GetLastError() == ERROR_SUCCESS)
    {
        printf("   –ü–æ—Å–ª–µ–¥–Ω—è—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ\n");
    }

    // –°–∏–º—É–ª–∏—Ä—É–µ–º –æ—à–∏–±–æ—á–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
    SetLastError(ERROR_FILE_NOT_FOUND);
    DWORD currentError = GetLastError();
    if (currentError != ERROR_SUCCESS)
    {
        printf("   –ü–æ—Å–ª–µ–¥–Ω—è—è –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π: %lu\n", currentError);

        // –ü–æ–ª—É—á–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
        LPSTR errorMsg = NULL;
        if (FormatMessageA(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM,
            NULL, currentError, 0, (LPSTR)&errorMsg, 0, NULL) > 0)
        {
            printf("   –û–ø–∏—Å–∞–Ω–∏–µ: %s", errorMsg);
            LocalFree(errorMsg);
        }
    }
}

// –§—É–Ω–∫—Ü–∏—è 5: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
void SafeStringOperationsDemo()
{
    printf("\n=== –ë–ï–ó–û–ü–ê–°–ù–´–ï –°–¢–†–û–ö–û–í–´–ï –û–ü–ï–†–ê–¶–ò–ò ===\n\n");

    // –ü—Ä–∏–º–µ—Ä 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫
    printf("1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫:\n");
    char source[] = "–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è";
    char dest1[50];

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º strcpy_s –≤–º–µ—Å—Ç–æ strcpy
    errno_t result = strcpy_s(dest1, sizeof(dest1), source);

    if (result == 0)
    {
        printf("   –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ: %s\n", dest1);
    }
    else
    {
        printf("   –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: –∫–æ–¥ %d\n", result);
        printf("   –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –±—É—Ñ–µ—Ä —Å–ª–∏—à–∫–æ–º –º–∞–ª –∏–ª–∏ –Ω—É–ª–µ–≤–æ–π —É–∫–∞–∑–∞—Ç–µ–ª—å\n");
    }

    // –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥–µ—Ä–∞
    printf("\n2. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –±—É—Ñ–µ—Ä–∞:\n");
    char dest2[10];  // –ú–∞–ª–µ–Ω—å–∫–∏–π –±—É—Ñ–µ—Ä

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º strncpy_s –≤–º–µ—Å—Ç–æ strcpy_s - –æ–Ω–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç assertion
    result = strncpy_s(dest2, sizeof(dest2), source, _TRUNCATE);

    if (result == 0)
    {
        printf("   –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ: %s\n", dest2);
    }
    else if (result == STRUNCATE)
    {
        printf("   –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞!\n");
        printf("   –°—Ç—Ä–æ–∫–∞ –±—ã–ª–∞ —É—Å–µ—á–µ–Ω–∞ —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ –±—É—Ñ–µ—Ä\n");
        printf("   –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞: %zu –±–∞–π—Ç\n", sizeof(dest2));
        printf("   –†–µ–∑—É–ª—å—Ç–∞—Ç: %s\n", dest2);
        printf("   –î–ª–∏–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: %zu —Å–∏–º–≤–æ–ª–æ–≤\n", strlen(dest2));
    }
    else
    {
        printf("   –û—à–∏–±–∫–∞: –∫–æ–¥ %d\n", result);
    }

    // –ü—Ä–∏–º–µ—Ä 3: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è - –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –í–ê–†–ò–ê–ù–¢
    printf("\n3. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫:\n");
    char path[MAX_PATH] = "C:\\Windows\\";
    char filename[] = "system32\\kernel32.dll";

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    printf("   –ò—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: %s\n", path);
    printf("   –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞: %zu –±–∞–π—Ç\n", sizeof(path));
    printf("   –î–ª–∏–Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏: %zu —Å–∏–º–≤–æ–ª–æ–≤\n", strlen(path));
    printf("   –°—Ç—Ä–æ–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: %s (–¥–ª–∏–Ω–∞: %zu —Å–∏–º–≤–æ–ª–æ–≤)\n", filename, strlen(filename));

    result = strcat_s(path, sizeof(path), filename);

    if (result == 0)
    {
        printf("   –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: %s\n", path);
        printf("   –ò—Ç–æ–≥–æ–≤–∞—è –¥–ª–∏–Ω–∞: %zu —Å–∏–º–≤–æ–ª–æ–≤\n", strlen(path));
    }
    else if (result == ERANGE)
    {
        printf("   –û—à–∏–±–∫–∞: —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è –¥–ª—è –±—É—Ñ–µ—Ä–∞!\n");
        printf("   –û–∂–∏–¥–∞–µ–º–∞—è –¥–ª–∏–Ω–∞: %zu —Å–∏–º–≤–æ–ª–æ–≤\n", strlen("C:\\Windows\\") + strlen(filename));
        printf("   –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: %zu —Å–∏–º–≤–æ–ª–æ–≤\n", sizeof(path) - 1);
        printf("   –ë—É—Ñ–µ—Ä –æ—Å—Ç–∞–ª—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º: %s\n", path);

        // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Å–µ—á–µ–Ω–∏–µ–º
        char alt_path[MAX_PATH] = "C:\\Windows\\";
        strncat_s(alt_path, sizeof(alt_path), filename,
            sizeof(alt_path) - strlen(alt_path) - 1); // -1 –¥–ª—è –Ω—É–ª—å-—Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä–∞
        printf("   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: %s\n", alt_path);
    }
    else
    {
        printf("   –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞: –∫–æ–¥ %d\n", result);
    }

    // –ü—Ä–∏–º–µ—Ä 4: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    printf("\n4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫:\n");
    char buffer[100];
    int number = 42;
    double pi = 3.14159;
    const char* text = "—Ç–µ–∫—Å—Ç";

    result = sprintf_s(buffer, sizeof(buffer),
        "–ß–∏—Å–ª–æ: %d, Pi: %.2f, –¢–µ–∫—Å—Ç: %s", number, pi, text);

    if (result >= 0)
    {
        printf("   –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ: %s\n", buffer);
        printf("   –ó–∞–ø–∏—Å–∞–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤: %d\n", result);
    }
    else
    {
        printf("   –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –∫–æ–¥ %d\n", result);
    }

    // –ü—Ä–∏–º–µ—Ä 5: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
    printf("\n5. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫:\n");
    char str1[] = "Hello";
    char str2[] = "Hello";
    char str3[] = "World";

    int cmp1 = strcmp(str1, str2);
    int cmp2 = strcmp(str1, str3);

    printf("   strcmp(\"%s\", \"%s\") = %d\n", str1, str2, cmp1);
    printf("   strcmp(\"%s\", \"%s\") = %d\n", str1, str3, cmp2);

    if (cmp1 == 0)
    {
        printf("   –°—Ç—Ä–æ–∫–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã\n");
    }
    else if (cmp2 < 0)
    {
        printf("   –°—Ç—Ä–æ–∫–∞ \"%s\" –º–µ–Ω—å—à–µ —Å—Ç—Ä–æ–∫–∏ \"%s\"\n", str1, str3);
    }
    else
    {
        printf("   –°—Ç—Ä–æ–∫–∞ \"%s\" –±–æ–ª—å—à–µ —Å—Ç—Ä–æ–∫–∏ \"%s\"\n", str1, str3);
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
void PrintError(DWORD errorCode, const char* functionName)
{
    LPSTR errorMsg = NULL;
    DWORD chars = FormatMessageA(
        FORMAT_MESSAGE_ALLOCATE_BUFFER |
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        errorCode,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPSTR)&errorMsg,
        0,
        NULL
    );

    if (chars > 0 && errorMsg != NULL)
    {
        printf("–û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ %s (–∫–æ–¥ %lu): %s", functionName, errorCode, errorMsg);
        LocalFree(errorMsg);
    }
    else
    {
        printf("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ %s: –∫–æ–¥ %lu\n", functionName, errorCode);
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –≤—ã–≤–æ–¥ –º–µ–Ω—é
void PrintMenu()
{
    printf("\n=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ===\n\n");

    printf("1. –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Å—Ç—Ä–æ–∫ (ANSI <-> Unicode)\n");
    printf("2. –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ WinAPI\n");
    printf("3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞\n");
    printf("4. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—à–∏–±–æ–∫\n");
    printf("5. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏\n");
    printf("6. –í—ã—Ö–æ–¥\n\n");
}
```

---

## üîß **–ö–û–ú–ü–ò–õ–Ø–¶–ò–Ø –ò –ó–ê–ü–£–°–ö:**

### **–í Visual Studio:**
1. –°–æ–∑–¥–∞–π—Ç–µ **–∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç: **C/C++ ‚Üí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ ‚Üí "–ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –∫–æ–¥ C (/TC)"**
3. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –≤ `main.c`
4. –ù–∞–∂–º–∏—Ç–µ **Ctrl+F5** –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:**
```bash
cl lesson2.c /link kernel32.lib user32.lib
```

---

## üìã **–ê–ù–ê–õ–ò–ó –ü–†–û–ì–†–ê–ú–ú–´:**

1. –ü–æ—á–µ–º—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `CheckFileExists()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `GetFileAttributesW()` –≤–º–µ—Å—Ç–æ `GetFileAttributesA()`?
2. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ –≤—ã–∑–≤–∞—Ç—å `LocalFree(errorMsg)` –ø–æ—Å–ª–µ `FormatMessageA()`?
3. –ü–æ—á–µ–º—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `ConvertStrings()` –≤—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –∫–æ–¥–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–≤–æ–¥–∞?
4. –ö–∞–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `strcpy_s` –∏ –æ–±—ã—á–Ω—ã–º `strcpy`?
5. –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `SetLastError()` –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö?

---

## üéØ **–ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–î–ê–ù–ò–Ø –î–õ–Ø –°–ê–ú–û–°–¢–û–Ø–¢–ï–õ–¨–ù–û–ô –†–ê–ë–û–¢–´:**

### **–£—Ä–æ–≤–µ–Ω—å 1: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞**
1. –î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é `ConvertStrings()` –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤ –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8
2. –†–∞—Å—à–∏—Ä—å—Ç–µ `AnalyzeError()` ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–∏—Å–∫ –æ—à–∏–±–∫–∏ –ø–æ –∏–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Å—Ç—Ä–æ–∫–µ "ACCESS_DENIED")
3. –í `CheckFileExists()` –¥–æ–±–∞–≤—å—Ç–µ –≤—ã–≤–æ–¥ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `GetFileSizeEx`)

### **–£—Ä–æ–≤–µ–Ω—å 2: –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
1. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–∞–π–ª–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ (–≤–µ—Ä—Å–∏—è –û–°, –∏–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)

### **–£—Ä–æ–≤–µ–Ω—å 3: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∑–∞–¥–∞—á–∏**
1. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–≥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ —Ñ–∞–π–ª
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—É—Ç–µ–π —Ñ–∞–π–ª–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã)
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã

---

## üîç **–ö–†–ò–¢–ï–†–ò–ò –ü–†–û–í–ï–†–ö–ò:**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
2. ‚úÖ –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –í—Å–µ 5 —Ñ—É–Ω–∫—Ü–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`_s` –≤–µ—Ä—Å–∏–∏)
5. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ WinAPI —á–µ—Ä–µ–∑ `GetLastError()` –∏ `FormatMessage()`

### **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
1. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
2. ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ—Å–ª–µ `FormatMessage`)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥)

---

## üìö **–°–í–Ø–ó–¨ –° –ö–ù–ò–ì–û–ô –ò–û–°–ò–§–û–í–ò–ß–ê:**

### **–ì–ª–∞–≤–∞ 1 (—Å—Ç—Ä–∞–Ω–∏—Ü—ã 18-28):**
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ Windows
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### **–ì–ª–∞–≤–∞ 1 (—Å—Ç—Ä–∞–Ω–∏—Ü—ã 31-35):**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ WinAPI
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

### **–ß—Ç–æ –¥–∞–ª—å—à–µ (–ì–ª–∞–≤–∞ 2):**
- –û–±—ä–µ–∫—Ç—ã –∏ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –≤ Windows
- –Ø–¥—Ä–æ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

---

## üìû **–§–û–†–ú–ê–¢ –°–î–ê–ß–ò:**

### **–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É:**
1. **–û—Ç–≤–µ—Ç—ã** –Ω–∞ 5 —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
2. **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥** —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏
3. **–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã** –ø—Ä–æ–≥—Ä–∞–º–º—ã (—Å–∫—Ä–∏–Ω—à–æ—Ç—ã)
4. **–°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚Äî —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏/–∏–∑–º–µ–Ω–∏–ª–∏

### **–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 7-10 –¥–Ω–µ–π

---

## üí° **–°–û–í–ï–¢–´ –ü–û –í–´–ü–û–õ–ù–ï–ù–ò–Æ:**

1. **–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å —Ç–µ–æ—Ä–∏–∏** ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–∏–≥–∏
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–¥–µ–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–ª–∞–¥—á–∏–∫** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã** –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
5. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –æ—à–∏–±–æ–∫

---

**–≠—Ç–æ—Ç —É—Ä–æ–∫ –∑–∞–ª–æ–∂–∏—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ ‚Äî –¥–≤—É—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ Windows.**
